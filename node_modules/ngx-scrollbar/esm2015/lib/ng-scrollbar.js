import { Component, Input, Output, EventEmitter, ViewChild, ContentChild, NgZone, ElementRef, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';
import { Directionality } from '@angular/cdk/bidi';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { fromEvent, Subject } from 'rxjs';
import { auditTime, filter, map, pairwise, pluck, takeUntil, tap } from 'rxjs/operators';
import { ScrollViewport } from './scroll-viewport';
import { SmoothScrollManager } from 'ngx-scrollbar/smooth-scroll';
import { ScrollbarManager } from './utils/scrollbar-manager';
export class NgScrollbar {
    constructor(el, zone, changeDetectorRef, dir, smoothScroll, manager) {
        this.el = el;
        this.zone = zone;
        this.changeDetectorRef = changeDetectorRef;
        this.dir = dir;
        this.smoothScroll = smoothScroll;
        this.manager = manager;
        this._disabled = false;
        this._sensorDisabled = this.manager.globalOptions.sensorDisabled;
        this._pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;
        this._autoHeightDisabled = this.manager.globalOptions.autoHeightDisabled;
        this._autoWidthDisabled = this.manager.globalOptions.autoWidthDisabled;
        this._viewportPropagateMouseMove = this.manager.globalOptions.viewportPropagateMouseMove;
        /** A class forwarded to scrollable viewport element */
        this.viewClass = this.manager.globalOptions.viewClass;
        /** A class forwarded to the scrollbar track element */
        this.trackClass = this.manager.globalOptions.trackClass;
        /** A class forwarded to the scrollbar thumb element */
        this.thumbClass = this.manager.globalOptions.thumbClass;
        /** Minimum scrollbar thumb size */
        this.minThumbSize = this.manager.globalOptions.minThumbSize;
        /** The duration which the scrolling takes to reach its target when scrollbar rail is clicked */
        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;
        /**
         * Sets the pointer events method
         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)
         * Use scrollbar pointer events to handle dragging and track click
         */
        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;
        /**
         * Sets the supported scroll track of the viewport, there are 3 options:
         *
         * - `vertical` Use both vertical and horizontal scrollbar
         * - `horizontal` Use both vertical and horizontal scrollbar
         * - `all` Use both vertical and horizontal scrollbar
         */
        this.track = this.manager.globalOptions.track;
        /**
         * When to show the scrollbar, and there are 3 options:
         *
         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
         * - `always` Scrollbars are always shown even if the viewport is not scrollable
         */
        this.visibility = this.manager.globalOptions.visibility;
        /**
         *  Sets the appearance of the scrollbar, there are 2 options:
         *
         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.
         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
         */
        this.appearance = this.manager.globalOptions.appearance;
        /**
         * Sets the position of each scrollbar, there are 4 options:
         *
         * - `native` (Default) Use the default position like in native scrollbar.
         * - `invertY` Inverts vertical scrollbar position
         * - `invertX` Inverts Horizontal scrollbar position
         * - `invertAll` Inverts both scrollbar positions
         */
        this.position = this.manager.globalOptions.position;
        /** Debounce interval for detecting changes via ResizeObserver */
        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;
        /** Scroll Audit Time */
        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;
        /** Steam that emits when scrollbar is updated */
        this.updated = new EventEmitter();
        /** Set of attributes added on the scrollbar wrapper */
        this.state = {};
        /** Stream that destroys components' observables */
        this.destroyed = new Subject();
    }
    /** Disable custom scrollbar and switch back to native scrollbar */
    get disabled() {
        return this._disabled;
    }
    set disabled(disabled) {
        this._disabled = coerceBooleanProperty(disabled);
    }
    /** Whether ResizeObserver is disabled */
    get sensorDisabled() {
        return this._sensorDisabled;
    }
    set sensorDisabled(disabled) {
        this._sensorDisabled = coerceBooleanProperty(disabled);
    }
    /** A flag used to enable/disable the scrollbar thumb dragged event */
    get pointerEventsDisabled() {
        return this._pointerEventsDisabled;
    }
    set pointerEventsDisabled(disabled) {
        this._pointerEventsDisabled = coerceBooleanProperty(disabled);
    }
    /** Enable viewport mousemove event propagation (only when pointerEventsMethod="viewport") */
    get viewportPropagateMouseMove() {
        return this._viewportPropagateMouseMove;
    }
    set viewportPropagateMouseMove(disabled) {
        this._viewportPropagateMouseMove = coerceBooleanProperty(disabled);
    }
    /** Disable auto-height */
    get autoHeightDisabled() {
        return this._autoHeightDisabled;
    }
    set autoHeightDisabled(disabled) {
        this._autoHeightDisabled = coerceBooleanProperty(disabled);
    }
    /** Disable auto-width */
    get autoWidthDisabled() {
        return this._autoWidthDisabled;
    }
    set autoWidthDisabled(disabled) {
        this._autoWidthDisabled = coerceBooleanProperty(disabled);
    }
    get nativeElement() {
        return this.el.nativeElement;
    }
    /**
     * Update local state with each change detection
     */
    updateState() {
        let verticalUsed = false;
        let horizontalUsed = false;
        let isVerticallyScrollable = false;
        let isHorizontallyScrollable = false;
        // Check if vertical scrollbar should be displayed
        if (this.track === 'all' || this.track === 'vertical') {
            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;
            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;
        }
        // Check if horizontal scrollbar should be displayed
        if (this.track === 'all' || this.track === 'horizontal') {
            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;
            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;
        }
        // Update inner wrapper attributes
        this.setState({
            position: this.position,
            track: this.track,
            appearance: this.appearance,
            visibility: this.visibility,
            deactivated: this.disabled,
            dir: this.dir.value,
            pointerEventsMethod: this.pointerEventsMethod,
            verticalUsed,
            horizontalUsed,
            isVerticallyScrollable,
            isHorizontallyScrollable
        });
    }
    setState(state) {
        this.state = Object.assign(Object.assign({}, this.state), state);
        this.changeDetectorRef.detectChanges();
    }
    getScrolledByDirection(property) {
        let event;
        return this.scrolled.pipe(tap((e) => event = e), pluck('target', property), pairwise(), filter(([prev, curr]) => prev !== curr), map(() => event));
    }
    /**
     * Set hovered state if a scrollbar is being hovered
     */
    setHovered(hovered) {
        this.zone.run(() => this.setState(Object.assign({}, hovered)));
    }
    /**
     * Set dragging state if a scrollbar is being dragged
     */
    setDragging(dragging) {
        this.zone.run(() => this.setState(Object.assign({}, dragging)));
    }
    /**
     * Set clicked state if a scrollbar track is being click
     */
    setClicked(scrollbarClicked) {
        this.zone.run(() => this.setState({ scrollbarClicked }));
    }
    ngOnInit() {
        // Set the viewport based on user choice
        this.zone.runOutsideAngular(() => {
            if (this.customViewPort) {
                this.viewport = this.customViewPort;
                this.defaultViewPort.setAsWrapper();
            }
            else {
                this.viewport = this.defaultViewPort;
            }
            // Activate the selected viewport
            this.viewport.setAsViewport(this.viewClass);
            let scrollStream = fromEvent(this.viewport.nativeElement, 'scroll', { passive: true });
            // Throttle scroll event if 'scrollAuditTime' is set
            scrollStream = this.scrollAuditTime ? scrollStream.pipe(auditTime(this.scrollAuditTime)) : scrollStream;
            // Initialize scroll streams
            this.scrolled = scrollStream.pipe(takeUntil(this.destroyed));
            this.verticalScrolled = this.getScrolledByDirection('scrollTop');
            this.horizontalScrolled = this.getScrolledByDirection('scrollLeft');
        });
    }
    ngOnChanges(changes) {
        // Update only when the viewport is initialized
        if (this.viewport) {
            this.update();
        }
    }
    ngAfterViewInit() {
        // Initial update
        this.update();
        // Update on dir changes
        this.dir.change.pipe(tap(() => this.update()), takeUntil(this.destroyed)).subscribe();
    }
    ngOnDestroy() {
        this.destroyed.next();
        this.destroyed.complete();
    }
    /**
     * Update local state and the internal scrollbar controls
     */
    update() {
        if (!this.autoHeightDisabled) {
            this.updateHeight();
        }
        if (!this.autoWidthDisabled) {
            this.updateWidth();
        }
        // Re-evaluate the state after setting height or width
        this.updateState();
        this.updated.next();
    }
    /**
     * Smooth scroll functions
     */
    scrollTo(options) {
        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);
    }
    /**
     * Scroll to element by reference or selector
     */
    scrollToElement(target, options) {
        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);
    }
    updateHeight() {
        // Auto-height: Set component height to content height
        if (this.appearance === 'standard' && this.scrollbarX) {
            // if scrollbar-x is displayed in standard mode
            this.nativeElement.style.height = `${this.viewport.contentHeight + this.scrollbarX.nativeElement.clientHeight}px`;
        }
        else {
            this.nativeElement.style.height = `${this.viewport.contentHeight}px`;
        }
    }
    updateWidth() {
        // Auto-width: Set component minWidth to content width
        if (this.appearance === 'standard' && this.scrollbarY) {
            // if scrollbar-y is displayed in standard mode
            this.nativeElement.style.width = `${this.viewport.contentWidth + this.scrollbarY.nativeElement.clientWidth}px`;
        }
        else {
            this.nativeElement.style.width = `${this.viewport.contentWidth}px`;
        }
    }
}
NgScrollbar.decorators = [
    { type: Component, args: [{
                selector: 'ng-scrollbar',
                exportAs: 'ngScrollbar',
                template: "<div class=\"ng-scrollbar-wrapper\" [ngAttr]=\"state\">\n  <div class=\"ng-scroll-viewport-wrapper\"\n       (resizeSensor)=\"update()\"\n       [sensorDebounce]=\"sensorDebounce\"\n       [sensorDisabled]=\"sensorDisabled\">\n    <div scrollViewport\n         hideNativeScrollbar>\n      <div>\n        <ng-content></ng-content>\n      </div>\n    </div>\n  </div>\n  <ng-container *ngIf=\"!disabled\">\n    <scrollbar-x #scrollbarX\n                 *ngIf=\"state.horizontalUsed\"\n                 [attr.scrollable]=\"state.isHorizontallyScrollable\"\n                 [attr.fit]=\"state.verticalUsed\">\n    </scrollbar-x>\n    <scrollbar-y #scrollbarY\n                 *ngIf=\"state.verticalUsed\"\n                 [attr.scrollable]=\"state.isVerticallyScrollable\"\n                 [attr.fit]=\"state.horizontalUsed\">\n    </scrollbar-y>\n  </ng-container>\n</div>\n\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                host: { '[class.ng-scrollbar]': 'true' },
                styles: ["::ng-deep .ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-overscroll-behavior:initial;--scrollbar-transition-duration:400ms;--scrollbar-transition-delay:800ms;--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}", "::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}"]
            },] }
];
NgScrollbar.ctorParameters = () => [
    { type: ElementRef },
    { type: NgZone },
    { type: ChangeDetectorRef },
    { type: Directionality },
    { type: SmoothScrollManager },
    { type: ScrollbarManager }
];
NgScrollbar.propDecorators = {
    disabled: [{ type: Input }],
    sensorDisabled: [{ type: Input }],
    pointerEventsDisabled: [{ type: Input }],
    viewportPropagateMouseMove: [{ type: Input }],
    autoHeightDisabled: [{ type: Input }],
    autoWidthDisabled: [{ type: Input }],
    viewClass: [{ type: Input }],
    trackClass: [{ type: Input }],
    thumbClass: [{ type: Input }],
    minThumbSize: [{ type: Input }],
    trackClickScrollDuration: [{ type: Input }],
    pointerEventsMethod: [{ type: Input }],
    track: [{ type: Input }],
    visibility: [{ type: Input }],
    appearance: [{ type: Input }],
    position: [{ type: Input }],
    sensorDebounce: [{ type: Input }],
    scrollAuditTime: [{ type: Input }],
    updated: [{ type: Output }],
    scrollbarY: [{ type: ViewChild, args: ['scrollbarY', { read: ElementRef },] }],
    scrollbarX: [{ type: ViewChild, args: ['scrollbarX', { read: ElementRef },] }],
    defaultViewPort: [{ type: ViewChild, args: [ScrollViewport, { static: true },] }],
    customViewPort: [{ type: ContentChild, args: [ScrollViewport, { static: true },] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctc2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXNjcm9sbGJhci9zcmMvbGliL25nLXNjcm9sbGJhci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUNaLFNBQVMsRUFDVCxZQUFZLEVBTVosTUFBTSxFQUNOLFVBQVUsRUFDVixpQkFBaUIsRUFDakIsdUJBQXVCLEVBQ3hCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsU0FBUyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN0RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBdUIsbUJBQW1CLEVBQXVELE1BQU0sNkJBQTZCLENBQUM7QUFXNUksT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFVN0QsTUFBTSxPQUFPLFdBQVc7SUF3SnRCLFlBQ1UsRUFBYyxFQUNkLElBQVksRUFDWixpQkFBb0MsRUFDcEMsR0FBbUIsRUFDbkIsWUFBaUMsRUFDbEMsT0FBeUI7UUFMeEIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNkLFNBQUksR0FBSixJQUFJLENBQVE7UUFDWixzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLFFBQUcsR0FBSCxHQUFHLENBQWdCO1FBQ25CLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQUNs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RUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFO3lCQUU1QyxTQUFTLFNBQUMsWUFBWSxFQUFFLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRTs4QkFHNUMsU0FBUyxTQUFDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7NkJBRTFDLFlBQVksU0FBQyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBFdmVudEVtaXR0ZXIsXG4gIFZpZXdDaGlsZCxcbiAgQ29udGVudENoaWxkLFxuICBPbkluaXQsXG4gIEFmdGVyVmlld0luaXQsXG4gIE9uQ2hhbmdlcyxcbiAgT25EZXN0cm95LFxuICBTaW1wbGVDaGFuZ2VzLFxuICBOZ1pvbmUsXG4gIEVsZW1lbnRSZWYsXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERpcmVjdGlvbmFsaXR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2JpZGknO1xuaW1wb3J0IHsgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7IGZyb21FdmVudCwgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgYXVkaXRUaW1lLCBmaWx0ZXIsIG1hcCwgcGFpcndpc2UsIHBsdWNrLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IFNjcm9sbFZpZXdwb3J0IH0gZnJvbSAnLi9zY3JvbGwtdmlld3BvcnQnO1xuaW1wb3J0IHsgU21vb3RoU2Nyb2xsRWxlbWVudCwgU21vb3RoU2Nyb2xsTWFuYWdlciwgU21vb3RoU2Nyb2xsVG9PcHRpb25zLCBTbW9vdGhTY3JvbGxUb0VsZW1lbnRPcHRpb25zIH0gZnJvbSAnbmd4LXNjcm9sbGJhci9zbW9vdGgtc2Nyb2xsJztcbi8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgaW4gZGV2ZWxvcG1lbnQgbW9kZVxuLy8gaW1wb3J0IHsgU21vb3RoU2Nyb2xsRWxlbWVudCwgU21vb3RoU2Nyb2xsTWFuYWdlciwgU21vb3RoU2Nyb2xsVG9PcHRpb25zIH0gZnJvbSAnLi4vLi4vc21vb3RoLXNjcm9sbC9zcmMvcHVibGljX2FwaSc7XG5pbXBvcnQge1xuICBTY3JvbGxiYXJBcHBlYXJhbmNlLFxuICBTY3JvbGxiYXJUcmFjayxcbiAgU2Nyb2xsYmFyUG9zaXRpb24sXG4gIFNjcm9sbGJhclZpc2liaWxpdHksXG4gIE5nU2Nyb2xsYmFyU3RhdGUsXG4gIFNjcm9sbGJhclBvaW50ZXJFdmVudHNNZXRob2Rcbn0gZnJvbSAnLi9uZy1zY3JvbGxiYXIubW9kZWwnO1xuaW1wb3J0IHsgU2Nyb2xsYmFyTWFuYWdlciB9IGZyb20gJy4vdXRpbHMvc2Nyb2xsYmFyLW1hbmFnZXInO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZy1zY3JvbGxiYXInLFxuICBleHBvcnRBczogJ25nU2Nyb2xsYmFyJyxcbiAgdGVtcGxhdGVVcmw6ICduZy1zY3JvbGxiYXIuaHRtbCcsXG4gIHN0eWxlVXJsczogWyduZy1zY3JvbGxiYXIuc2NzcycsICdzY3JvbGxiYXIvc2hhcmVkLnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIGhvc3Q6IHsgJ1tjbGFzcy5uZy1zY3JvbGxiYXJdJzogJ3RydWUnIH1cbn0pXG5leHBvcnQgY2xhc3MgTmdTY3JvbGxiYXIgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcblxuICBwcml2YXRlIF9kaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9zZW5zb3JEaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnNlbnNvckRpc2FibGVkO1xuICBwcml2YXRlIF9wb2ludGVyRXZlbnRzRGlzYWJsZWQ6IGJvb2xlYW4gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5wb2ludGVyRXZlbnRzRGlzYWJsZWQ7XG4gIHByaXZhdGUgX2F1dG9IZWlnaHREaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLmF1dG9IZWlnaHREaXNhYmxlZDtcbiAgcHJpdmF0ZSBfYXV0b1dpZHRoRGlzYWJsZWQ6IGJvb2xlYW4gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5hdXRvV2lkdGhEaXNhYmxlZDtcbiAgcHJpdmF0ZSBfdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmU6IGJvb2xlYW4gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy52aWV3cG9ydFByb3BhZ2F0ZU1vdXNlTW92ZTtcblxuICAvKiogRGlzYWJsZSBjdXN0b20gc2Nyb2xsYmFyIGFuZCBzd2l0Y2ggYmFjayB0byBuYXRpdmUgc2Nyb2xsYmFyICovXG4gIEBJbnB1dCgpXG4gIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gIH1cblxuICBzZXQgZGlzYWJsZWQoZGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9kaXNhYmxlZCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShkaXNhYmxlZCk7XG4gIH1cblxuICAvKiogV2hldGhlciBSZXNpemVPYnNlcnZlciBpcyBkaXNhYmxlZCAqL1xuICBASW5wdXQoKVxuICBnZXQgc2Vuc29yRGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbnNvckRpc2FibGVkO1xuICB9XG5cbiAgc2V0IHNlbnNvckRpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fc2Vuc29yRGlzYWJsZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoZGlzYWJsZWQpO1xuICB9XG5cbiAgLyoqIEEgZmxhZyB1c2VkIHRvIGVuYWJsZS9kaXNhYmxlIHRoZSBzY3JvbGxiYXIgdGh1bWIgZHJhZ2dlZCBldmVudCAqL1xuICBASW5wdXQoKVxuICBnZXQgcG9pbnRlckV2ZW50c0Rpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9wb2ludGVyRXZlbnRzRGlzYWJsZWQ7XG4gIH1cblxuICBzZXQgcG9pbnRlckV2ZW50c0Rpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fcG9pbnRlckV2ZW50c0Rpc2FibGVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGRpc2FibGVkKTtcbiAgfVxuXG4gIC8qKiBFbmFibGUgdmlld3BvcnQgbW91c2Vtb3ZlIGV2ZW50IHByb3BhZ2F0aW9uIChvbmx5IHdoZW4gcG9pbnRlckV2ZW50c01ldGhvZD1cInZpZXdwb3J0XCIpICovXG4gIEBJbnB1dCgpXG4gIGdldCB2aWV3cG9ydFByb3BhZ2F0ZU1vdXNlTW92ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmU7XG4gIH1cblxuICBzZXQgdmlld3BvcnRQcm9wYWdhdGVNb3VzZU1vdmUoZGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl92aWV3cG9ydFByb3BhZ2F0ZU1vdXNlTW92ZSA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShkaXNhYmxlZCk7XG4gIH1cblxuICAvKiogRGlzYWJsZSBhdXRvLWhlaWdodCAqL1xuICBASW5wdXQoKVxuICBnZXQgYXV0b0hlaWdodERpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9hdXRvSGVpZ2h0RGlzYWJsZWQ7XG4gIH1cblxuICBzZXQgYXV0b0hlaWdodERpc2FibGVkKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgdGhpcy5fYXV0b0hlaWdodERpc2FibGVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGRpc2FibGVkKTtcbiAgfVxuXG4gIC8qKiBEaXNhYmxlIGF1dG8td2lkdGggKi9cbiAgQElucHV0KClcbiAgZ2V0IGF1dG9XaWR0aERpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9hdXRvV2lkdGhEaXNhYmxlZDtcbiAgfVxuXG4gIHNldCBhdXRvV2lkdGhEaXNhYmxlZChkaXNhYmxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX2F1dG9XaWR0aERpc2FibGVkID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGRpc2FibGVkKTtcbiAgfVxuXG4gIC8qKiBBIGNsYXNzIGZvcndhcmRlZCB0byBzY3JvbGxhYmxlIHZpZXdwb3J0IGVsZW1lbnQgKi9cbiAgQElucHV0KCkgdmlld0NsYXNzOiBzdHJpbmcgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy52aWV3Q2xhc3M7XG4gIC8qKiBBIGNsYXNzIGZvcndhcmRlZCB0byB0aGUgc2Nyb2xsYmFyIHRyYWNrIGVsZW1lbnQgKi9cbiAgQElucHV0KCkgdHJhY2tDbGFzczogc3RyaW5nID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudHJhY2tDbGFzcztcbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHRoZSBzY3JvbGxiYXIgdGh1bWIgZWxlbWVudCAqL1xuICBASW5wdXQoKSB0aHVtYkNsYXNzOiBzdHJpbmcgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy50aHVtYkNsYXNzO1xuICAvKiogTWluaW11bSBzY3JvbGxiYXIgdGh1bWIgc2l6ZSAqL1xuICBASW5wdXQoKSBtaW5UaHVtYlNpemU6IG51bWJlciA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLm1pblRodW1iU2l6ZTtcbiAgLyoqIFRoZSBkdXJhdGlvbiB3aGljaCB0aGUgc2Nyb2xsaW5nIHRha2VzIHRvIHJlYWNoIGl0cyB0YXJnZXQgd2hlbiBzY3JvbGxiYXIgcmFpbCBpcyBjbGlja2VkICovXG4gIEBJbnB1dCgpIHRyYWNrQ2xpY2tTY3JvbGxEdXJhdGlvbjogbnVtYmVyID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudHJhY2tDbGlja1Njcm9sbER1cmF0aW9uO1xuICAvKipcbiAgICogU2V0cyB0aGUgcG9pbnRlciBldmVudHMgbWV0aG9kXG4gICAqIFVzZSB2aWV3cG9ydCBwb2ludGVyIGV2ZW50cyAgdG8gaGFuZGxlIGRyYWdnaW5nIGFuZCB0cmFjayBjbGljayAoVGhpcyBtYWtlcyBzY3JvbGxpbmcgd29yayB3aGVuIG1vdXNlIGlzIG92ZXIgdGhlIHNjcm9sbGJhcilcbiAgICogVXNlIHNjcm9sbGJhciBwb2ludGVyIGV2ZW50cyB0byBoYW5kbGUgZHJhZ2dpbmcgYW5kIHRyYWNrIGNsaWNrXG4gICAqL1xuICBASW5wdXQoKSBwb2ludGVyRXZlbnRzTWV0aG9kOiBTY3JvbGxiYXJQb2ludGVyRXZlbnRzTWV0aG9kID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMucG9pbnRlckV2ZW50c01ldGhvZDtcbiAgLyoqXG4gICAqIFNldHMgdGhlIHN1cHBvcnRlZCBzY3JvbGwgdHJhY2sgb2YgdGhlIHZpZXdwb3J0LCB0aGVyZSBhcmUgMyBvcHRpb25zOlxuICAgKlxuICAgKiAtIGB2ZXJ0aWNhbGAgVXNlIGJvdGggdmVydGljYWwgYW5kIGhvcml6b250YWwgc2Nyb2xsYmFyXG4gICAqIC0gYGhvcml6b250YWxgIFVzZSBib3RoIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHNjcm9sbGJhclxuICAgKiAtIGBhbGxgIFVzZSBib3RoIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHNjcm9sbGJhclxuICAgKi9cbiAgQElucHV0KCkgdHJhY2s6IFNjcm9sbGJhclRyYWNrID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudHJhY2s7XG4gIC8qKlxuICAgKiBXaGVuIHRvIHNob3cgdGhlIHNjcm9sbGJhciwgYW5kIHRoZXJlIGFyZSAzIG9wdGlvbnM6XG4gICAqXG4gICAqIC0gYG5hdGl2ZWAgKGRlZmF1bHQpIFNjcm9sbGJhciB3aWxsIGJlIHZpc2libGUgd2hlbiB2aWV3cG9ydCBpcyBzY3JvbGxhYmxlIGxpa2Ugd2l0aCBuYXRpdmUgc2Nyb2xsYmFyXG4gICAqIC0gYGhvdmVyYCBTY3JvbGxiYXJzIGFyZSBoaWRkZW4gYnkgZGVmYXVsdCwgb25seSB2aXNpYmxlIG9uIHNjcm9sbGluZyBvciBob3ZlcmluZ1xuICAgKiAtIGBhbHdheXNgIFNjcm9sbGJhcnMgYXJlIGFsd2F5cyBzaG93biBldmVuIGlmIHRoZSB2aWV3cG9ydCBpcyBub3Qgc2Nyb2xsYWJsZVxuICAgKi9cbiAgQElucHV0KCkgdmlzaWJpbGl0eTogU2Nyb2xsYmFyVmlzaWJpbGl0eSA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnZpc2liaWxpdHk7XG4gIC8qKlxuICAgKiAgU2V0cyB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgc2Nyb2xsYmFyLCB0aGVyZSBhcmUgMiBvcHRpb25zOlxuICAgKlxuICAgKiAtIGBzdGFuZGFyZGAgKGRlZmF1bHQpIHNjcm9sbGJhciBzcGFjZSB3aWxsIGJlIHJlc2VydmVkIGp1c3QgbGlrZSB3aXRoIG5hdGl2ZSBzY3JvbGxiYXIuXG4gICAqIC0gYGNvbXBhY3RgIHNjcm9sbGJhciBkb2Vzbid0IHJlc2VydmUgYW55IHNwYWNlLCB0aGV5IGFyZSBwbGFjZWQgb3ZlciB0aGUgdmlld3BvcnQuXG4gICAqL1xuICBASW5wdXQoKSBhcHBlYXJhbmNlOiBTY3JvbGxiYXJBcHBlYXJhbmNlID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuYXBwZWFyYW5jZTtcbiAgLyoqXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIG9mIGVhY2ggc2Nyb2xsYmFyLCB0aGVyZSBhcmUgNCBvcHRpb25zOlxuICAgKlxuICAgKiAtIGBuYXRpdmVgIChEZWZhdWx0KSBVc2UgdGhlIGRlZmF1bHQgcG9zaXRpb24gbGlrZSBpbiBuYXRpdmUgc2Nyb2xsYmFyLlxuICAgKiAtIGBpbnZlcnRZYCBJbnZlcnRzIHZlcnRpY2FsIHNjcm9sbGJhciBwb3NpdGlvblxuICAgKiAtIGBpbnZlcnRYYCBJbnZlcnRzIEhvcml6b250YWwgc2Nyb2xsYmFyIHBvc2l0aW9uXG4gICAqIC0gYGludmVydEFsbGAgSW52ZXJ0cyBib3RoIHNjcm9sbGJhciBwb3NpdGlvbnNcbiAgICovXG4gIEBJbnB1dCgpIHBvc2l0aW9uOiBTY3JvbGxiYXJQb3NpdGlvbiA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnBvc2l0aW9uO1xuICAvKiogRGVib3VuY2UgaW50ZXJ2YWwgZm9yIGRldGVjdGluZyBjaGFuZ2VzIHZpYSBSZXNpemVPYnNlcnZlciAqL1xuICBASW5wdXQoKSBzZW5zb3JEZWJvdW5jZTogbnVtYmVyID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuc2Vuc29yRGVib3VuY2U7XG4gIC8qKiBTY3JvbGwgQXVkaXQgVGltZSAqL1xuICBASW5wdXQoKSBzY3JvbGxBdWRpdFRpbWU6IG51bWJlciA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnNjcm9sbEF1ZGl0VGltZTtcblxuICAvKiogU3RlYW0gdGhhdCBlbWl0cyB3aGVuIHNjcm9sbGJhciBpcyB1cGRhdGVkICovXG4gIEBPdXRwdXQoKSB1cGRhdGVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIC8qKiBWZXJ0aWNhbCBzY3JvbGxiYXIgRWxlbWVudFJlZiB1c2VkIGZvciBpbmNsdWRlIGl0cyB0aGlja25lc3MgaW4gYXV0by13aWR0aCBtb2RlICovXG4gIEBWaWV3Q2hpbGQoJ3Njcm9sbGJhclknLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSkgcHJpdmF0ZSBzY3JvbGxiYXJZITogRWxlbWVudFJlZjtcbiAgLyoqIEhvcml6b250YWwgc2Nyb2xsYmFyIEVsZW1lbnRSZWYgdXNlZCBmb3IgaW5jbHVkZSBpdHMgdGhpY2tuZXNzIGluIGF1dG8taGVpZ2h0IG1vZGUgKi9cbiAgQFZpZXdDaGlsZCgnc2Nyb2xsYmFyWCcsIHsgcmVhZDogRWxlbWVudFJlZiB9KSBwcml2YXRlIHNjcm9sbGJhclghOiBFbGVtZW50UmVmO1xuXG4gIC8qKiBEZWZhdWx0IHZpZXdwb3J0IHJlZmVyZW5jZSAqL1xuICBAVmlld0NoaWxkKFNjcm9sbFZpZXdwb3J0LCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIGRlZmF1bHRWaWV3UG9ydCE6IFNjcm9sbFZpZXdwb3J0O1xuICAvKiogQ3VzdG9tIHZpZXdwb3J0IHJlZmVyZW5jZSAqL1xuICBAQ29udGVudENoaWxkKFNjcm9sbFZpZXdwb3J0LCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIGN1c3RvbVZpZXdQb3J0ITogU2Nyb2xsVmlld3BvcnQ7XG4gIC8qKiBWaWV3cG9ydCBFbGVtZW50ICovXG4gIHZpZXdwb3J0ITogU2Nyb2xsVmlld3BvcnQ7XG4gIC8qKiBTZXQgb2YgYXR0cmlidXRlcyBhZGRlZCBvbiB0aGUgc2Nyb2xsYmFyIHdyYXBwZXIgKi9cbiAgc3RhdGU6IE5nU2Nyb2xsYmFyU3RhdGUgPSB7fTtcbiAgLyoqIFN0cmVhbSB0aGF0IGRlc3Ryb3lzIGNvbXBvbmVudHMnIG9ic2VydmFibGVzICovXG4gIHByaXZhdGUgcmVhZG9ubHkgZGVzdHJveWVkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICAvKiogU3RyZWFtIHRoYXQgZW1pdHMgb24gc2Nyb2xsIGV2ZW50ICovXG4gIHNjcm9sbGVkITogT2JzZXJ2YWJsZTxhbnk+O1xuICAvKiogU3RlYW0gdGhhdCBlbWl0cyBzY3JvbGwgZXZlbnQgZm9yIHZlcnRpY2FsIHNjcm9sbGJhciAqL1xuICB2ZXJ0aWNhbFNjcm9sbGVkITogT2JzZXJ2YWJsZTxhbnk+O1xuICAvKiogU3RlYW0gdGhhdCBlbWl0cyBzY3JvbGwgZXZlbnQgZm9yIGhvcml6b250YWwgc2Nyb2xsYmFyICovXG4gIGhvcml6b250YWxTY3JvbGxlZCE6IE9ic2VydmFibGU8YW55PjtcblxuICBnZXQgbmF0aXZlRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuZWwubmF0aXZlRWxlbWVudDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsXG4gICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBkaXI6IERpcmVjdGlvbmFsaXR5LFxuICAgIHByaXZhdGUgc21vb3RoU2Nyb2xsOiBTbW9vdGhTY3JvbGxNYW5hZ2VyLFxuICAgIHB1YmxpYyBtYW5hZ2VyOiBTY3JvbGxiYXJNYW5hZ2VyKSB7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGxvY2FsIHN0YXRlIHdpdGggZWFjaCBjaGFuZ2UgZGV0ZWN0aW9uXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVN0YXRlKCkge1xuICAgIGxldCB2ZXJ0aWNhbFVzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBsZXQgaG9yaXpvbnRhbFVzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBsZXQgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGxldCBpc0hvcml6b250YWxseVNjcm9sbGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8vIENoZWNrIGlmIHZlcnRpY2FsIHNjcm9sbGJhciBzaG91bGQgYmUgZGlzcGxheWVkXG4gICAgaWYgKHRoaXMudHJhY2sgPT09ICdhbGwnIHx8IHRoaXMudHJhY2sgPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgIGlzVmVydGljYWxseVNjcm9sbGFibGUgPSB0aGlzLnZpZXdwb3J0IS5zY3JvbGxIZWlnaHQgPiB0aGlzLnZpZXdwb3J0IS5jbGllbnRIZWlnaHQ7XG4gICAgICB2ZXJ0aWNhbFVzZWQgPSB0aGlzLnZpc2liaWxpdHkgPT09ICdhbHdheXMnIHx8IGlzVmVydGljYWxseVNjcm9sbGFibGU7XG4gICAgfVxuICAgIC8vIENoZWNrIGlmIGhvcml6b250YWwgc2Nyb2xsYmFyIHNob3VsZCBiZSBkaXNwbGF5ZWRcbiAgICBpZiAodGhpcy50cmFjayA9PT0gJ2FsbCcgfHwgdGhpcy50cmFjayA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICBpc0hvcml6b250YWxseVNjcm9sbGFibGUgPSB0aGlzLnZpZXdwb3J0IS5zY3JvbGxXaWR0aCA+IHRoaXMudmlld3BvcnQhLmNsaWVudFdpZHRoO1xuICAgICAgaG9yaXpvbnRhbFVzZWQgPSB0aGlzLnZpc2liaWxpdHkgPT09ICdhbHdheXMnIHx8IGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgaW5uZXIgd3JhcHBlciBhdHRyaWJ1dGVzXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbixcbiAgICAgIHRyYWNrOiB0aGlzLnRyYWNrLFxuICAgICAgYXBwZWFyYW5jZTogdGhpcy5hcHBlYXJhbmNlLFxuICAgICAgdmlzaWJpbGl0eTogdGhpcy52aXNpYmlsaXR5LFxuICAgICAgZGVhY3RpdmF0ZWQ6IHRoaXMuZGlzYWJsZWQsXG4gICAgICBkaXI6IHRoaXMuZGlyLnZhbHVlLFxuICAgICAgcG9pbnRlckV2ZW50c01ldGhvZDogdGhpcy5wb2ludGVyRXZlbnRzTWV0aG9kLFxuICAgICAgdmVydGljYWxVc2VkLFxuICAgICAgaG9yaXpvbnRhbFVzZWQsXG4gICAgICBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlLFxuICAgICAgaXNIb3Jpem9udGFsbHlTY3JvbGxhYmxlXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNldFN0YXRlKHN0YXRlOiBOZ1Njcm9sbGJhclN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHsgLi4udGhpcy5zdGF0ZSwgLi4uc3RhdGUgfTtcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2Nyb2xsZWRCeURpcmVjdGlvbihwcm9wZXJ0eTogJ3Njcm9sbExlZnQnIHwgJ3Njcm9sbFRvcCcpIHtcbiAgICBsZXQgZXZlbnQ6IGFueTtcbiAgICByZXR1cm4gdGhpcy5zY3JvbGxlZCEucGlwZShcbiAgICAgIHRhcCgoZTogYW55KSA9PiBldmVudCA9IGUpLFxuICAgICAgcGx1Y2soJ3RhcmdldCcsIHByb3BlcnR5KSxcbiAgICAgIHBhaXJ3aXNlKCksXG4gICAgICBmaWx0ZXIoKFtwcmV2LCBjdXJyXSkgPT4gcHJldiAhPT0gY3VyciksXG4gICAgICBtYXAoKCkgPT4gZXZlbnQpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgaG92ZXJlZCBzdGF0ZSBpZiBhIHNjcm9sbGJhciBpcyBiZWluZyBob3ZlcmVkXG4gICAqL1xuICBzZXRIb3ZlcmVkKGhvdmVyZWQ6IFNjcm9sbGJhckhvdmVyZWQpIHtcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHRoaXMuc2V0U3RhdGUoeyAuLi5ob3ZlcmVkIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZHJhZ2dpbmcgc3RhdGUgaWYgYSBzY3JvbGxiYXIgaXMgYmVpbmcgZHJhZ2dlZFxuICAgKi9cbiAgc2V0RHJhZ2dpbmcoZHJhZ2dpbmc6IFNjcm9sbGJhckRyYWdnaW5nKSB7XG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLnNldFN0YXRlKHsgLi4uZHJhZ2dpbmcgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjbGlja2VkIHN0YXRlIGlmIGEgc2Nyb2xsYmFyIHRyYWNrIGlzIGJlaW5nIGNsaWNrXG4gICAqL1xuICBzZXRDbGlja2VkKHNjcm9sbGJhckNsaWNrZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHRoaXMuc2V0U3RhdGUoeyBzY3JvbGxiYXJDbGlja2VkIH0pKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIC8vIFNldCB0aGUgdmlld3BvcnQgYmFzZWQgb24gdXNlciBjaG9pY2VcbiAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuY3VzdG9tVmlld1BvcnQpIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IHRoaXMuY3VzdG9tVmlld1BvcnQ7XG4gICAgICAgIHRoaXMuZGVmYXVsdFZpZXdQb3J0IS5zZXRBc1dyYXBwZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmRlZmF1bHRWaWV3UG9ydDtcbiAgICAgIH1cbiAgICAgIC8vIEFjdGl2YXRlIHRoZSBzZWxlY3RlZCB2aWV3cG9ydFxuICAgICAgdGhpcy52aWV3cG9ydCEuc2V0QXNWaWV3cG9ydCh0aGlzLnZpZXdDbGFzcyEpO1xuXG4gICAgICBsZXQgc2Nyb2xsU3RyZWFtID0gZnJvbUV2ZW50KHRoaXMudmlld3BvcnQhLm5hdGl2ZUVsZW1lbnQsICdzY3JvbGwnLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAvLyBUaHJvdHRsZSBzY3JvbGwgZXZlbnQgaWYgJ3Njcm9sbEF1ZGl0VGltZScgaXMgc2V0XG4gICAgICBzY3JvbGxTdHJlYW0gPSB0aGlzLnNjcm9sbEF1ZGl0VGltZSA/IHNjcm9sbFN0cmVhbS5waXBlKGF1ZGl0VGltZSh0aGlzLnNjcm9sbEF1ZGl0VGltZSkpIDogc2Nyb2xsU3RyZWFtO1xuICAgICAgLy8gSW5pdGlhbGl6ZSBzY3JvbGwgc3RyZWFtc1xuICAgICAgdGhpcy5zY3JvbGxlZCA9IHNjcm9sbFN0cmVhbS5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3llZCkpO1xuICAgICAgdGhpcy52ZXJ0aWNhbFNjcm9sbGVkID0gdGhpcy5nZXRTY3JvbGxlZEJ5RGlyZWN0aW9uKCdzY3JvbGxUb3AnKTtcbiAgICAgIHRoaXMuaG9yaXpvbnRhbFNjcm9sbGVkID0gdGhpcy5nZXRTY3JvbGxlZEJ5RGlyZWN0aW9uKCdzY3JvbGxMZWZ0Jyk7XG4gICAgfSk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgLy8gVXBkYXRlIG9ubHkgd2hlbiB0aGUgdmlld3BvcnQgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAodGhpcy52aWV3cG9ydCkge1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgLy8gSW5pdGlhbCB1cGRhdGVcbiAgICB0aGlzLnVwZGF0ZSgpO1xuXG4gICAgLy8gVXBkYXRlIG9uIGRpciBjaGFuZ2VzXG4gICAgdGhpcy5kaXIuY2hhbmdlLnBpcGUoXG4gICAgICB0YXAoKCkgPT4gdGhpcy51cGRhdGUoKSksXG4gICAgICB0YWtlVW50aWwodGhpcy5kZXN0cm95ZWQpXG4gICAgKS5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuZGVzdHJveWVkLm5leHQoKTtcbiAgICB0aGlzLmRlc3Ryb3llZC5jb21wbGV0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBsb2NhbCBzdGF0ZSBhbmQgdGhlIGludGVybmFsIHNjcm9sbGJhciBjb250cm9sc1xuICAgKi9cbiAgdXBkYXRlKCkge1xuICAgIGlmICghdGhpcy5hdXRvSGVpZ2h0RGlzYWJsZWQpIHtcbiAgICAgIHRoaXMudXBkYXRlSGVpZ2h0KCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmF1dG9XaWR0aERpc2FibGVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZVdpZHRoKCk7XG4gICAgfVxuICAgIC8vIFJlLWV2YWx1YXRlIHRoZSBzdGF0ZSBhZnRlciBzZXR0aW5nIGhlaWdodCBvciB3aWR0aFxuICAgIHRoaXMudXBkYXRlU3RhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZWQubmV4dCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNtb290aCBzY3JvbGwgZnVuY3Rpb25zXG4gICAqL1xuICBzY3JvbGxUbyhvcHRpb25zOiBTbW9vdGhTY3JvbGxUb09wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5zbW9vdGhTY3JvbGwuc2Nyb2xsVG8odGhpcy52aWV3cG9ydCEubmF0aXZlRWxlbWVudCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRvIGVsZW1lbnQgYnkgcmVmZXJlbmNlIG9yIHNlbGVjdG9yXG4gICAqL1xuICBzY3JvbGxUb0VsZW1lbnQodGFyZ2V0OiBTbW9vdGhTY3JvbGxFbGVtZW50LCBvcHRpb25zPzogU21vb3RoU2Nyb2xsVG9FbGVtZW50T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxUb0VsZW1lbnQodGhpcy52aWV3cG9ydCEubmF0aXZlRWxlbWVudCwgdGFyZ2V0LCBvcHRpb25zKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlSGVpZ2h0KCkge1xuICAgIC8vIEF1dG8taGVpZ2h0OiBTZXQgY29tcG9uZW50IGhlaWdodCB0byBjb250ZW50IGhlaWdodFxuICAgIGlmICh0aGlzLmFwcGVhcmFuY2UgPT09ICdzdGFuZGFyZCcgJiYgdGhpcy5zY3JvbGxiYXJYKSB7XG4gICAgICAvLyBpZiBzY3JvbGxiYXIteCBpcyBkaXNwbGF5ZWQgaW4gc3RhbmRhcmQgbW9kZVxuICAgICAgdGhpcy5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IGAkeyB0aGlzLnZpZXdwb3J0IS5jb250ZW50SGVpZ2h0ICsgdGhpcy5zY3JvbGxiYXJYLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0IH1weGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHsgdGhpcy52aWV3cG9ydCEuY29udGVudEhlaWdodCB9cHhgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlV2lkdGgoKSB7XG4gICAgLy8gQXV0by13aWR0aDogU2V0IGNvbXBvbmVudCBtaW5XaWR0aCB0byBjb250ZW50IHdpZHRoXG4gICAgaWYgKHRoaXMuYXBwZWFyYW5jZSA9PT0gJ3N0YW5kYXJkJyAmJiB0aGlzLnNjcm9sbGJhclkpIHtcbiAgICAgIC8vIGlmIHNjcm9sbGJhci15IGlzIGRpc3BsYXllZCBpbiBzdGFuZGFyZCBtb2RlXG4gICAgICB0aGlzLm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHsgdGhpcy52aWV3cG9ydCEuY29udGVudFdpZHRoICsgdGhpcy5zY3JvbGxiYXJZLm5hdGl2ZUVsZW1lbnQuY2xpZW50V2lkdGggfXB4YDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7IHRoaXMudmlld3BvcnQhLmNvbnRlbnRXaWR0aCB9cHhgO1xuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgU2Nyb2xsYmFyRHJhZ2dpbmcge1xuICB2ZXJ0aWNhbERyYWdnaW5nPzogYm9vbGVhbjtcbiAgaG9yaXpvbnRhbERyYWdnaW5nPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFNjcm9sbGJhckhvdmVyZWQge1xuICB2ZXJ0aWNhbEhvdmVyZWQ/OiBib29sZWFuO1xuICBob3Jpem9udGFsSG92ZXJlZD86IGJvb2xlYW47XG59XG4iXX0=