import { Directive, Inject, ElementRef } from '@angular/core';
import { DOCUMENT } from '@angular/common';
import { Directionality } from '@angular/cdk/bidi';
import { NgScrollbar } from '../../ng-scrollbar';
import { ThumbAdapter } from './thumb';
import { TrackXDirective, TrackYDirective } from '../track/track.directive';
export class ThumbXDirective extends ThumbAdapter {
    constructor(cmp, track, element, document, dir) {
        super(cmp, track, element.nativeElement, document);
        this.cmp = cmp;
        this.track = track;
        this.element = element;
        this.document = document;
        this.dir = dir;
    }
    get clientProperty() {
        return 'clientX';
    }
    get pageProperty() {
        return 'pageX';
    }
    get viewportScrollSize() {
        return this.cmp.viewport.scrollWidth;
    }
    get viewportScrollOffset() {
        return this.cmp.viewport.scrollLeft;
    }
    get viewportScrollMax() {
        return this.cmp.viewport.scrollMaxX;
    }
    get dragStartOffset() {
        return this.clientRect.left + this.document.defaultView.pageXOffset || 0;
    }
    get size() {
        return this.thumbElement.clientWidth;
    }
    updateStyles(position, size) {
        this.thumbElement.style.width = `${size}px`;
        this.thumbElement.style.transform = `translate3d(${position}px, 0, 0)`;
    }
    handleDrag(position, scrollMax) {
        if (this.dir.value === 'rtl') {
            if (this.cmp.manager.rtlScrollAxisType === 1 /* NEGATED */) {
                return position - scrollMax;
            }
            if (this.cmp.manager.rtlScrollAxisType === 2 /* INVERTED */) {
                return scrollMax - position;
            }
            // Keeping this as a memo
            // if (this.rtlScrollAxisType === RtlScrollAxisType.NORMAL) {
            //   return position;
            // }
        }
        return position;
    }
    handleDirection(position, trackMax) {
        if (this.dir.value === 'rtl') {
            if (this.cmp.manager.rtlScrollAxisType === 2 /* INVERTED */) {
                return -position;
            }
            if (this.cmp.manager.rtlScrollAxisType === 0 /* NORMAL */) {
                return position - trackMax;
            }
            // Keeping this as a memo
            // if (this.rtlScrollAxisType === RtlScrollAxisType.NEGATED) {
            //   return position;
            // }
        }
        return position;
    }
    setDragging(value) {
        this.cmp.setDragging({ horizontalDragging: value });
    }
    scrollTo(position) {
        this.cmp.viewport.scrollXTo(position);
    }
}
ThumbXDirective.decorators = [
    { type: Directive, args: [{ selector: '[scrollbarThumbX]' },] }
];
ThumbXDirective.ctorParameters = () => [
    { type: NgScrollbar },
    { type: TrackXDirective },
    { type: ElementRef },
    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },
    { type: Directionality }
];
export class ThumbYDirective extends ThumbAdapter {
    constructor(cmp, track, element, document) {
        super(cmp, track, element.nativeElement, document);
        this.cmp = cmp;
        this.track = track;
        this.element = element;
        this.document = document;
    }
    get pageProperty() {
        return 'pageY';
    }
    get viewportScrollSize() {
        return this.cmp.viewport.scrollHeight;
    }
    get viewportScrollOffset() {
        return this.cmp.viewport.scrollTop;
    }
    get viewportScrollMax() {
        return this.cmp.viewport.scrollMaxY;
    }
    get clientProperty() {
        return 'clientY';
    }
    get dragStartOffset() {
        return this.clientRect.top + this.document.defaultView.pageYOffset || 0;
    }
    get size() {
        return this.thumbElement.clientHeight;
    }
    updateStyles(position, size) {
        this.thumbElement.style.height = `${size}px`;
        this.thumbElement.style.transform = `translate3d(0px, ${position}px, 0)`;
    }
    handleDrag(position) {
        return position;
    }
    handleDirection(position) {
        return position;
    }
    setDragging(value) {
        this.cmp.setDragging({ verticalDragging: value });
    }
    scrollTo(position) {
        this.cmp.viewport.scrollYTo(position);
    }
}
ThumbYDirective.decorators = [
    { type: Directive, args: [{ selector: '[scrollbarThumbY]' },] }
];
ThumbYDirective.ctorParameters = () => [
    { type: NgScrollbar },
    { type: TrackYDirective },
    { type: ElementRef },
    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGh1bWIuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXNjcm9sbGJhci9zcmMvbGliL3Njcm9sbGJhci90aHVtYi90aHVtYi5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUUzQyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDbkQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDdkMsT0FBTyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUc1RSxNQUFNLE9BQU8sZUFBZ0IsU0FBUSxZQUFZO0lBOEIvQyxZQUFzQixHQUFnQixFQUNoQixLQUFzQixFQUN0QixPQUFtQixFQUNELFFBQWEsRUFDL0IsR0FBbUI7UUFDdkMsS0FBSyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLGFBQWEsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUwvQixRQUFHLEdBQUgsR0FBRyxDQUFhO1FBQ2hCLFVBQUssR0FBTCxLQUFLLENBQWlCO1FBQ3RCLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFDRCxhQUFRLEdBQVIsUUFBUSxDQUFLO1FBQy9CLFFBQUcsR0FBSCxHQUFHLENBQWdCO0lBRXpDLENBQUM7SUFsQ0QsSUFBYyxjQUFjO1FBQzFCLE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFFRCxJQUFjLFlBQVk7UUFDeEIsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztJQUVELElBQWMsa0JBQWtCO1FBQzlCLE9BQU8sSUFBSSxD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RyxDQUFDLFdBQVcsQ0FBQyxFQUFFLGdCQUFnQixFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUVTLFFBQVEsQ0FBQyxRQUFnQjtRQUNqQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDekMsQ0FBQzs7O1lBMURGLFNBQVMsU0FBQyxFQUFFLFFBQVEsRUFBRSxtQkFBbUIsRUFBRTs7O1lBekZuQyxXQUFXO1lBRU0sZUFBZTtZQU5iLFVBQVU7NENBK0h2QixNQUFNLFNBQUMsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgSW5qZWN0LCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBSdGxTY3JvbGxBeGlzVHlwZSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBEaXJlY3Rpb25hbGl0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9iaWRpJztcbmltcG9ydCB7IE5nU2Nyb2xsYmFyIH0gZnJvbSAnLi4vLi4vbmctc2Nyb2xsYmFyJztcbmltcG9ydCB7IFRodW1iQWRhcHRlciB9IGZyb20gJy4vdGh1bWInO1xuaW1wb3J0IHsgVHJhY2tYRGlyZWN0aXZlLCBUcmFja1lEaXJlY3RpdmUgfSBmcm9tICcuLi90cmFjay90cmFjay5kaXJlY3RpdmUnO1xuXG5ARGlyZWN0aXZlKHsgc2VsZWN0b3I6ICdbc2Nyb2xsYmFyVGh1bWJYXScgfSlcbmV4cG9ydCBjbGFzcyBUaHVtYlhEaXJlY3RpdmUgZXh0ZW5kcyBUaHVtYkFkYXB0ZXIge1xuXG4gIHByb3RlY3RlZCBnZXQgY2xpZW50UHJvcGVydHkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2NsaWVudFgnO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBwYWdlUHJvcGVydHkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ3BhZ2VYJztcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgdmlld3BvcnRTY3JvbGxTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY21wLnZpZXdwb3J0IS5zY3JvbGxXaWR0aDtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgdmlld3BvcnRTY3JvbGxPZmZzZXQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jbXAudmlld3BvcnQhLnNjcm9sbExlZnQ7XG4gIH1cblxuICBnZXQgdmlld3BvcnRTY3JvbGxNYXgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jbXAudmlld3BvcnQhLnNjcm9sbE1heFg7XG4gIH1cblxuICBnZXQgZHJhZ1N0YXJ0T2Zmc2V0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50UmVjdC5sZWZ0ICsgdGhpcy5kb2N1bWVudC5kZWZhdWx0VmlldyEucGFnZVhPZmZzZXQgfHwgMDtcbiAgfVxuXG4gIGdldCBzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudGh1bWJFbGVtZW50LmNsaWVudFdpZHRoO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGNtcDogTmdTY3JvbGxiYXIsXG4gICAgICAgICAgICAgIHByb3RlY3RlZCB0cmFjazogVHJhY2tYRGlyZWN0aXZlLFxuICAgICAgICAgICAgICBwcm90ZWN0ZWQgZWxlbWVudDogRWxlbWVudFJlZixcbiAgICAgICAgICAgICAgQEluamVjdChET0NVTUVOVCkgcHJvdGVjdGVkIGRvY3VtZW50OiBhbnksXG4gICAgICAgICAgICAgIHByb3RlY3RlZCBkaXI6IERpcmVjdGlvbmFsaXR5KSB7XG4gICAgc3VwZXIoY21wLCB0cmFjaywgZWxlbWVudC5uYXRpdmVFbGVtZW50LCBkb2N1bWVudCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlU3R5bGVzKHBvc2l0aW9uOiBudW1iZXIsIHNpemU6IG51bWJlcikge1xuICAgIHRoaXMudGh1bWJFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7c2l6ZX1weGA7XG4gICAgdGhpcy50aHVtYkVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7cG9zaXRpb259cHgsIDAsIDApYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBoYW5kbGVEcmFnKHBvc2l0aW9uOiBudW1iZXIsIHNjcm9sbE1heDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5kaXIudmFsdWUgPT09ICdydGwnKSB7XG4gICAgICBpZiAodGhpcy5jbXAubWFuYWdlci5ydGxTY3JvbGxBeGlzVHlwZSA9PT0gUnRsU2Nyb2xsQXhpc1R5cGUuTkVHQVRFRCkge1xuICAgICAgICByZXR1cm4gcG9zaXRpb24gLSBzY3JvbGxNYXg7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jbXAubWFuYWdlci5ydGxTY3JvbGxBeGlzVHlwZSA9PT0gUnRsU2Nyb2xsQXhpc1R5cGUuSU5WRVJURUQpIHtcbiAgICAgICAgcmV0dXJuIHNjcm9sbE1heCAtIHBvc2l0aW9uO1xuICAgICAgfVxuICAgICAgLy8gS2VlcGluZyB0aGlzIGFzIGEgbWVtb1xuICAgICAgLy8gaWYgKHRoaXMucnRsU2Nyb2xsQXhpc1R5cGUgPT09IFJ0bFNjcm9sbEF4aXNUeXBlLk5PUk1BTCkge1xuICAgICAgLy8gICByZXR1cm4gcG9zaXRpb247XG4gICAgICAvLyB9XG4gICAgfVxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfVxuXG4gIHByb3RlY3RlZCBoYW5kbGVEaXJlY3Rpb24ocG9zaXRpb246IG51bWJlciwgdHJhY2tNYXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuZGlyLnZhbHVlID09PSAncnRsJykge1xuICAgICAgaWYgKHRoaXMuY21wLm1hbmFnZXIucnRsU2Nyb2xsQXhpc1R5cGUgPT09IFJ0bFNjcm9sbEF4aXNUeXBlLklOVkVSVEVEKSB7XG4gICAgICAgIHJldHVybiAtcG9zaXRpb247XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jbXAubWFuYWdlci5ydGxTY3JvbGxBeGlzVHlwZSA9PT0gUnRsU2Nyb2xsQXhpc1R5cGUuTk9STUFMKSB7XG4gICAgICAgIHJldHVybiBwb3NpdGlvbiAtIHRyYWNrTWF4O1xuICAgICAgfVxuICAgICAgLy8gS2VlcGluZyB0aGlzIGFzIGEgbWVtb1xuICAgICAgLy8gaWYgKHRoaXMucnRsU2Nyb2xsQXhpc1R5cGUgPT09IFJ0bFNjcm9sbEF4aXNUeXBlLk5FR0FURUQpIHtcbiAgICAgIC8vICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgICAgLy8gfVxuICAgIH1cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cblxuICBwcm90ZWN0ZWQgc2V0RHJhZ2dpbmcodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmNtcC5zZXREcmFnZ2luZyh7IGhvcml6b250YWxEcmFnZ2luZzogdmFsdWUgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2Nyb2xsVG8ocG9zaXRpb246IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuY21wLnZpZXdwb3J0IS5zY3JvbGxYVG8ocG9zaXRpb24pO1xuICB9XG59XG5cbkBEaXJlY3RpdmUoeyBzZWxlY3RvcjogJ1tzY3JvbGxiYXJUaHVtYlldJyB9KVxuZXhwb3J0IGNsYXNzIFRodW1iWURpcmVjdGl2ZSBleHRlbmRzIFRodW1iQWRhcHRlciB7XG5cbiAgcHJvdGVjdGVkIGdldCBwYWdlUHJvcGVydHkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ3BhZ2VZJztcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgdmlld3BvcnRTY3JvbGxTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY21wLnZpZXdwb3J0IS5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IHZpZXdwb3J0U2Nyb2xsT2Zmc2V0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY21wLnZpZXdwb3J0IS5zY3JvbGxUb3A7XG4gIH1cblxuICBnZXQgdmlld3BvcnRTY3JvbGxNYXgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jbXAudmlld3BvcnQhLnNjcm9sbE1heFk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGNsaWVudFByb3BlcnR5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdjbGllbnRZJztcbiAgfVxuXG4gIGdldCBkcmFnU3RhcnRPZmZzZXQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnRSZWN0LnRvcCArIHRoaXMuZG9jdW1lbnQuZGVmYXVsdFZpZXchLnBhZ2VZT2Zmc2V0IHx8IDA7XG4gIH1cblxuICBnZXQgc2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnRodW1iRWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgY21wOiBOZ1Njcm9sbGJhcixcbiAgICAgICAgICAgICAgcHJvdGVjdGVkIHRyYWNrOiBUcmFja1lEaXJlY3RpdmUsXG4gICAgICAgICAgICAgIHByb3RlY3RlZCBlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgICAgICAgICAgICBASW5qZWN0KERPQ1VNRU5UKSBwcm90ZWN0ZWQgZG9jdW1lbnQ6IGFueSkge1xuICAgIHN1cGVyKGNtcCwgdHJhY2ssIGVsZW1lbnQubmF0aXZlRWxlbWVudCwgZG9jdW1lbnQpO1xuICB9XG5cblxuICBwcm90ZWN0ZWQgdXBkYXRlU3R5bGVzKHBvc2l0aW9uOiBudW1iZXIsIHNpemU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMudGh1bWJFbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3NpemV9cHhgO1xuICAgIHRoaXMudGh1bWJFbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwcHgsICR7cG9zaXRpb259cHgsIDApYDtcbiAgfVxuXG4gIHByb3RlY3RlZCBoYW5kbGVEcmFnKHBvc2l0aW9uOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfVxuXG4gIHByb3RlY3RlZCBoYW5kbGVEaXJlY3Rpb24ocG9zaXRpb246IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNldERyYWdnaW5nKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5jbXAuc2V0RHJhZ2dpbmcoeyB2ZXJ0aWNhbERyYWdnaW5nOiB2YWx1ZSB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzY3JvbGxUbyhwb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5jbXAudmlld3BvcnQhLnNjcm9sbFlUbyhwb3NpdGlvbik7XG4gIH1cbn1cbiJdfQ==